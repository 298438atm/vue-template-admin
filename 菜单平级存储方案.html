<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>

    function delSonMenu(menus, code) {
      let idx = menus.findIndex(itm => itm.code === code)
      if (idx > -1) {
        let currentMenu = menus[idx]
        const currentCode = currentMenu.code
        menus.splice(idx, 1)
        JSON.parse(JSON.stringify(menus)).forEach(item => {
          if (item.parentMenu === currentCode) {
            delSonMenu(menus, item.code)
          }
        })
      }
    }

    // 示例数据
    const menus = [
      {
        name: '系统设置',
        componentPath: '/systemSetting',
        remark: '我是系统设置',
        type: 'menu',
        icon: 'el-icon-setting',
        status: '1',
        parentMenu: 'rootMenu',
        sort: 2,
        code: 'systemSetting',
      },
      {
        name: '角色管理',
        componentPath: '/systemSetting/role',
        remark: '我是角色管理',
        type: 'page',
        icon: 'el-icon-bank-card',
        status: '1',
        pageRoute: '/systemSetting/role',
        parentMenu: 'systemSetting',
        children: [],
        code: 'role',
        sort: 2,
        componentName: 'Role',
      },
      {
        name: '字典管理',
        componentPath: '/systemSetting/dict',
        remark: '我是字典管理',
        type: 'page',
        icon: 'el-icon-reading',
        pageRoute: '/systemSetting/dict',
        status: '1',
        parentMenu: 'systemSetting',
        children: [],
        code: 'dict',
        sort: 4,
        componentName: 'Dict',
      },
      {
        parentMenu: 'systemSetting',
        type: 'page',
        name: '用户管理',
        code: 'user',
        status: '1',
        keepAlive: false,
        icon: 'el-icon-user-solid',
        createTime: '2023-09-04 15:25:43',
        pageRoute: '/systemSetting/user',
        componentPath: '/systemSetting/user',
        children: [],
        sort: 3,
        componentName: '用户管理',
        remark: '我是用户管理',
      },

      {
        name: '菜单管理',
        componentPath: '/systemSetting/menu',
        remark: '我是菜单管理',
        type: 'page',
        icon: 'el-icon-menu',
        status: '1',
        pageRoute: '/systemSetting/menu',
        parentMenu: 'systemSetting',
        children: [],
        code: 'menu',
        sort: 1,
        componentName: 'Menu',
      },
      {
        parentMenu: 'rootMenu',
        type: 'page',
        name: '首页',
        code: 'home',
        componentPath: '/Home.vue',
        status: '1',
        keepAlive: false,
        pageRoute: '/home',
        icon: 'el-icon-s-home',
        remark: '我是首页！',
        sort: 1,
        componentName: 'Home',
        createTime: '2023-12-18 20:28:41',
        children: [],
      },
      {
        name: '业务模拟',
        componentPath: 'business',
        remark: '我是业务模拟',
        type: 'menu',
        icon: 'el-icon-s-cooperation',
        parentMenu: 'rootMenu',
        status: '1',
        code: 'business',
        sort: 3,
      },
      {
        name: '商品管理',
        componentPath: 'goods',
        remark: '我是备注',
        type: 'menu',
        icon: 'el-icon-s-shop',
        parentMenu: 'business',
        status: '1',
        code: 'goods',
        sort: 1,
      },
      {
        name: '新进商品',
        componentPath: '/business/goods/newAddGoods',
        remark: '我是备注',
        type: 'page',
        icon: 'el-icon-s-data',
        parentMenu: 'goods',
        status: '1',
        pageRoute: '/business/goods/newAddGoods',
        children: [],
        code: 'newAddGoods',
        sort: 2,
        componentName: 'NewAddGoods',
      },
      {
        parentMenu: 'rootMenu',
        type: 'menu',
        name: '系统工具',
        code: 'systemTool',
        status: '1',
        keepAlive: false,
        icon: 'el-icon-upload',
        createTime: '2023-08-24 15:45:23',
        sort: 3,
        remark: '我是系统工具',
      },
      {
        parentMenu: 'systemTool',
        type: 'page',
        name: '页面生成器',
        code: 'pageGenerator',
        status: '1',
        keepAlive: false,
        icon: 'el-icon-star-on',
        createTime: '2023-08-24 15:47:40',
        componentPath: '/systemTool/pageGenerator',
        pageRoute: '/systemTool/pageGenerator',
        sort: 1,
        children: [],
        componentName: 'PageGenerator',
        remark: '我是页面生成器',
      },
    ]

    const sortedMenus = delSonMenu(menus, "systemSetting")

    console.log(sortedMenus)

  </script>
</body>

</html>